# Simple chain for Slurm

Example of a simple workflow that consists of a

* creating a conda environment if it doesn't exist,
* preprocessing step,
* a processing step that requires multiple cores, and
* a postprocessing step.

Although Nextflow lets you create conda environments on the fly, it does so
on the login node.  Since for environments with many dependencies this may
be both time and memory consuming, it may be preferable to do this as a job
on a cmopute node.


## What is it?

1. `preprocess.py`: Python script for the preprocessing step.  It generates a
   file with a given number of 2D-points.
1. `process.py`: Python script for the processing step.  It reads the file
   generated by the preprocessing step, and computes the distance between all
   pairs of points.  It uses multiple cores to do so.
1. `postprocess.py`: Python script for the postprocessing step.  It reads the
   file generated by the processing step, and computes the distribution of the
   distances.
1. `workflow.nf`: NextFlow script defining the workflow.
1. `nextflow.config`: minimal NextFlow configuration file to enable conda
   environments.
1. `conda_environment.yml`: conda environment file to create the environment
   required by the `Process` step of the workflow.
1. `conda_init.sh`: Bash script to source to initialize conda.
